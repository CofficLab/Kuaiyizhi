---
title: Implementing i18n in Astro Projects
description: This experiment will document in detail how to implement multilingual support following the official Astro documentation
---

# Implementing i18n in Astro Projects

## Experiment Objectives

1. Understand the basic principles of implementing internationalization in Astro projects
2. Master the specific steps of implementing multilingual support using the official recommended solution
3. Learn how to organize and manage multilingual content

## Experiment Environment

- Node.js: v18.0.0 or higher
- Astro: v4.0.0 or higher
- Operating System: Cross-platform support

## Experiment Steps

### Step 1: Project Preparation

1. Create a new Astro project (skip if using existing project):
```bash
npm create astro@latest my-i18n-site
cd my-i18n-site
```

2. Create the basic directory structure:
```
src/
├── pages/
│   ├── en/
│   │   └── index.astro
│   ├── zh/
│   │   └── index.astro
│   └── index.astro
└── i18n/
    └── ui.ts
```

### Step 2: Configure Routing Strategy

1. Configure i18n in `astro.config.mjs`:

```javascript
import { defineConfig } from 'astro/config';

export default defineConfig({
  i18n: {
    defaultLocale: 'zh',
    locales: ['en', 'zh'],
    routing: {
      prefixDefaultLocale: false
    }
  }
});
```

### Step 3: Create Language Configuration File

1. Define translations in `src/i18n/ui.ts`:

```typescript
export const languages = {
  en: 'English',
  zh: '中文',
};

export const defaultLang = 'zh';

export const ui = {
  en: {
    'nav.home': 'Home',
    'nav.about': 'About',
    'nav.blog': 'Blog',
  },
  zh: {
    'nav.home': '首页',
    'nav.about': '关于',
    'nav.blog': '博客',
  },
} as const;
```

### Step 4: Create Language Utility Functions

1. Create helper functions in `src/i18n/utils.ts`:

```typescript
import { ui, defaultLang } from './ui';

export function getLangFromUrl(url: URL) {
  const [, lang] = url.pathname.split('/');
  if (lang in ui) return lang as keyof typeof ui;
  return defaultLang;
}

export function useTranslations(lang: keyof typeof ui) {
  return function t(key: keyof typeof ui[typeof defaultLang]) {
    return ui[lang][key] || ui[defaultLang][key];
  }
}
```

### Step 5: Implement Language Switcher Component

1. Create `src/components/LanguagePicker.astro`:

```astro
---
import { languages } from '../i18n/ui';
---

<ul>
  {Object.entries(languages).map(([lang, label]) => (
    <li>
      <a href={`/${lang}/`}>{label}</a>
    </li>
  ))}
</ul>

<style>
  ul {
    display: flex;
    gap: 1rem;
    list-style: none;
    padding: 0;
  }
  a {
    color: #666;
    text-decoration: none;
  }
  a:hover {
    color: #000;
    text-decoration: underline;
  }
</style>
```

### Step 6: Create Multilingual Pages

1. Create English homepage `src/pages/en/index.astro`:

```astro
---
import { useTranslations } from '../../i18n/utils';
import LanguagePicker from '../../components/LanguagePicker.astro';

const t = useTranslations('en');
---

<html lang="en">
  <head>
    <title>My Multilingual Website</title>
  </head>
  <body>
    <nav>
      <LanguagePicker />
      <a href="/en">{t('nav.home')}</a>
      <a href="/en/about">{t('nav.about')}</a>
      <a href="/en/blog">{t('nav.blog')}</a>
    </nav>
    <h1>Welcome to English Site</h1>
  </body>
</html>
```

2. Create Chinese homepage `src/pages/zh/index.astro`:

```astro
---
import { useTranslations } from '../../i18n/utils';
import LanguagePicker from '../../components/LanguagePicker.astro';

const t = useTranslations('zh');
---

<html lang="zh">
  <head>
    <title>我的多语言网站</title>
  </head>
  <body>
    <nav>
      <LanguagePicker />
      <a href="/">{t('nav.home')}</a>
      <a href="/about">{t('nav.about')}</a>
      <a href="/blog">{t('nav.blog')}</a>
    </nav>
    <h1>欢迎访问中文站点</h1>
  </body>
</html>
```

## Experiment Results

After completing the above steps, we have successfully implemented:

1. Route-based language switching mechanism
2. Reusable translation system
3. Language switching component
4. Multilingual page structure

You can view different language versions at the following URLs:
- http://localhost:4321/ (Default Chinese)
- http://localhost:4321/en/ (English)
- http://localhost:4321/zh/ (Chinese)

## Experiment Summary

### Advantages
1. Officially supported solution with good maintainability
2. Clear file system-based routing
3. TypeScript support with type safety
4. Flexible translation management system

### Important Notes
1. Need to manually maintain routes for each language version
2. Translation files require unified management and timely updates
3. URL structure needs to consider SEO friendliness

### Improvement Suggestions
1. Add automatic redirection functionality
2. Consider introducing translation management tools
3. Implement language preference memory feature

## References

1. [Astro Official i18n Documentation](https://docs.astro.build/en/guides/internationalization/)
2. [Astro Routing Documentation](https://docs.astro.build/en/guides/routing/)
3. [TypeScript Documentation](https://www.typescriptlang.org/docs/) 