---
import AppLayout from './AppLayout.astro';
import { getTags } from '../database/blogs';
import { SidebarItem } from '@/models/Sidebar';

interface Props {
  title: string;
  description: string;
  headings?: Array<{ depth: number; slug: string; text: string }>;
  lang: string;
}

const { title, description, lang } = Astro.props;

const tags = await getTags(lang);
const sidebarItems = new SidebarItem({
  type: 'group',
  label: 'Tags',
  items: tags.map(
    (tag) =>
      new SidebarItem({
        type: 'link',
        label: tag,
        link: `/blogs/tags/${tag}`,
      })
  ),
});
---

<AppLayout
  title={title}
  description={description}
  template="splash"
  frontmatter={{
    title: title,
    description: description,
    template: 'splash',
  }}
  hasSidebar={true}
  sidebar={sidebarItems}
  headings={[]}
  hidePageTitle={true}>
  <slot />
</AppLayout>
