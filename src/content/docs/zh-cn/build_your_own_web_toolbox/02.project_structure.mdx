---
title: 项目结构设计
description: 详细介绍 Nuxt.js 项目的目录结构和设计规范
---

## 目录结构

在上一节中，我们已经初始化了一个基础的 Nuxt.js 项目。现在让我们深入了解项目的目录结构，以及如何组织我们的代码。

### 核心目录

```bash
web-toolbox/
├── components/     # 可复用组件
├── pages/          # 页面组件
├── layouts/        # 布局组件
├── composables/    # 组合式函数
├── stores/         # 状态管理
├── utils/          # 工具函数
├── types/          # TypeScript 类型定义
├── public/         # 静态资源
└── server/         # API 路由
```

让我们详细了解每个目录的用途：

1. **components/**
   - 存放可复用的 Vue 组件
   - 支持自动导入，无需手动注册
   - 建议按功能模块分组

2. **pages/**
   - 基于文件的路由系统
   - 文件路径即 URL 路径
   - 支持动态路由和嵌套路由

3. **layouts/**
   - 页面布局模板
   - 包含公共元素（如导航栏、页脚）
   - 可以定义多个布局并动态切换

4. **composables/**
   - Vue 3 组合式函数
   - 提取和复用组件逻辑
   - 支持自动导入

5. **stores/**
   - 使用 Pinia 进行状态管理
   - 存放全局状态定义
   - 按功能模块组织

6. **utils/**
   - 通用工具函数
   - API 请求封装
   - 常量定义

7. **types/**
   - TypeScript 类型定义
   - 接口类型
   - 通用类型

8. **public/**
   - 静态资源文件
   - 直接通过 URL 访问
   - 图片、字体等资源

9. **server/**
   - API 路由处理
   - 中间件
   - 服务端工具函数

## 组件设计规范

### 组件命名

1. **使用 PascalCase 命名法**
```vue
<!-- 正确 -->
<WeatherCard />
<ExpressTracker />

<!-- 错误 -->
<weatherCard />
<express-tracker />
```

2. **组件文件命名与组件名一致**
```bash
components/
├── WeatherCard.vue
├── ExpressTracker.vue
└── common/
    ├── BaseButton.vue
    └── BaseInput.vue
```

### 组件结构

1. **基础组件结构**
```vue
<script setup lang="ts">
// 1. 类型导入
import type { PropType } from 'vue'

// 2. Props 定义
const props = defineProps<{
  title: string
  loading?: boolean
}>()

// 3. Emits 定义
const emit = defineEmits<{
  (e: 'update', value: string): void
  (e: 'submit'): void
}>()

// 4. 组合式函数
const { data, loading } = useAsyncData()

// 5. 计算属性和方法
const computedValue = computed(() => {})
function handleClick() {}
</script>

<template>
  <div class="weather-card">
    <!-- 组件内容 -->
  </div>
</template>
```

2. **Props 验证**
```vue
const props = defineProps({
  status: {
    type: String as PropType<'success' | 'error' | 'loading'>,
    required: true,
    validator: (value: string) => {
      return ['success', 'error', 'loading'].includes(value)
    }
  }
})
```

### 组件通信

1. **Props 向下传递**
```vue
<template>
  <WeatherCard
    :city="currentCity"
    :loading="isLoading"
    @update="handleUpdate"
  />
</template>
```

2. **Events 向上传递**
```vue
<script setup lang="ts">
const emit = defineEmits<{
  (e: 'update', value: string): void
}>()

function handleInput(event: Event) {
  const value = (event.target as HTMLInputElement).value
  emit('update', value)
}
</script>
```

3. **使用 Provide/Inject**
```vue
<!-- 父组件 -->
<script setup lang="ts">
import { provide } from 'vue'

provide('theme', 'dark')
</script>

<!-- 子组件 -->
<script setup lang="ts">
import { inject } from 'vue'

const theme = inject('theme', 'light') // 提供默认值
</script>
```

## 状态管理

我们使用 Pinia 作为状态管理方案。以下是一个典型的 store 示例：

```typescript
// stores/weather.ts
import { defineStore } from 'pinia'

export const useWeatherStore = defineStore('weather', {
  state: () => ({
    currentCity: '',
    weatherData: null as WeatherData | null,
    loading: false,
    error: null as string | null
  }),

  getters: {
    isLoading: (state) => state.loading,
    hasError: (state) => state.error !== null
  },

  actions: {
    async fetchWeather(city: string) {
      this.loading = true
      this.error = null
      try {
        this.weatherData = await fetchWeatherData(city)
        this.currentCity = city
      } catch (err) {
        this.error = (err as Error).message
      } finally {
        this.loading = false
      }
    }
  }
})
```

## 路由设计

Nuxt.js 使用基于文件的路由系统。以下是我们的路由结构：

```bash
pages/
├── index.vue           # 首页 (/)
├── weather/
│   ├── index.vue       # 天气查询页 (/weather)
│   └── [city].vue      # 城市天气详情页 (/weather/beijing)
├── express/
│   ├── index.vue       # 快递查询页 (/express)
│   └── [id].vue        # 快递详情页 (/express/123456)
└── tools/
    ├── index.vue       # 工具列表页 (/tools)
    ├── qrcode.vue      # 二维码工具页 (/tools/qrcode)
    └── currency.vue    # 汇率转换页 (/tools/currency)
```

## 下一步

现在我们已经了解了项目的基础结构，接下来我们将：

1. 实现基础布局
2. 开发导航菜单
3. 创建通用组件
4. 配置状态管理