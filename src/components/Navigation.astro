---
import LinkDB from '@/database/LinkDB';
import { getLangFromPathname } from '@/utils/lang';

const currentPath = Astro.url.pathname;
const normalizedLocale = getLangFromPathname(Astro.url.pathname);

const navItems = [
  {
    href: LinkDB.getHomeLink(normalizedLocale),
    label: normalizedLocale === 'zh-cn' ? '首页' : 'Home',
    match: (path: string) => LinkDB.isHomeLink(path, normalizedLocale),
  },
  {
    href: LinkDB.getCoursesLink(normalizedLocale),
    label: normalizedLocale === 'zh-cn' ? '课程' : 'Courses',
    match: (path: string) => LinkDB.isCoursesLink(path, normalizedLocale),
  },
  {
    href: LinkDB.getLessonsLink(normalizedLocale),
    label: normalizedLocale === 'zh-cn' ? 'Build Your Own' : 'Build Your Own',
    match: (path: string) => LinkDB.isLessonsLink(path, normalizedLocale),
  },
  {
    href: LinkDB.getBlogsLink(normalizedLocale),
    label: normalizedLocale === 'zh-cn' ? '博客' : 'Blogs',
    match: (path: string) => LinkDB.isBlogsLink(path, normalizedLocale),
  },
];
---

<div class="flex flex-row gap-4 items-center">
  {
    navItems.map((item) => (
      <a
        class:list={[
          'btn btn-sm no-underline',
          'hover:text-primary-content hover:bg-primary/20',
          'transition-all duration-300',
          {
            'btn-ghost': !item.match(currentPath),
            'btn-active': item.match(currentPath),
            'btn-accent': item.match(currentPath),
          },
        ]}
        href={item.href}>
        {item.label}
      </a>
    ))
  }
</div>
