---
import AppLayout from '../layouts/AppLayout.astro';
import { getCourses } from '../database/course_db';
import BookCard from './BookCard.astro';
import { Book } from '@/models/Book';

interface Props {
  lang?: string;
}

const { lang = 'zh-cn' } = Astro.props;
const courses = await getCourses();
const books: Book[] = courses.map((course) => {
  return Book.fromDataEntry(course);
});

const title = lang === 'zh-cn' ? '课程列表' : 'Courses List';
const description = lang === 'zh-cn' ? '课程列表' : 'Courses List';
---

<AppLayout
  title={title}
  description={description}
  template="splash"
  frontmatter={{
    title: title,
    description: description,
    template: 'splash',
  }}
  hasSidebar={false}
  sidebar={null}
  headings={[]}
  hidePageTitle={true}>
  <div
    class="not-content mt-12 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 2xl:grid-cols-5 gap-8">
    {
      books.map((book) => (
        <BookCard
          link={book.link}
          book={{ title: book.title }}
          childrenCount={10}
        />
      ))
    }
  </div>
</AppLayout>
