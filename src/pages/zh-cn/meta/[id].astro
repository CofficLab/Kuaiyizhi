---
import MetaLayout from '../../../layouts/MetaLayout.astro';
import { getMetas } from '../../../utils/docs';
import { render } from 'astro:content';

export const prerender = true;

export async function getStaticPaths() {
    const metas = await getMetas();
    return metas
        .filter((meta) => meta.id.startsWith('zh-cn/'))
        .map((meta) => ({
            params: {
                id: meta.id.replace('zh-cn/', ''),
            },
            props: { meta },
        }));
}

const { meta } = Astro.props;
const { Content, headings } = await render(meta);
---

<MetaLayout
    title={meta.data.title}
    description={meta.data.description ?? ''}
    headings={headings}>
    <Content />
</MetaLayout>
