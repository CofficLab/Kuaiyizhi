---
import DocRouter from '@/router/DocRouter';
import DocPage from '@/components/DocPage.astro';
import CourseRouter from '@/router/CourseRouter';
import CoursesPage from '@/components/CoursesPage.astro';
import BlogsRouter from '@/router/BlogsRouter';
import BlogsPage from '@/components/BlogsPage.astro';
import HomeRouter from '@/router/HomeRouter';
import HomePage from '@/components/HomePage.astro';
import Lang from '@/models/Lang';
import TagRouter from '@/router/TagRouter';
import TagPage from '@/components/TagsPage.astro';

export const prerender = true;
export async function getStaticPaths() {
  return [
    ...(await TagRouter.getPaths()),
    ...(await DocRouter.getPaths()),
    ...(await CourseRouter.getPaths()),
    ...(await BlogsRouter.getPaths()),
    ...(await HomeRouter.getPaths()),
  ];
}

const { slug } = Astro.params;
---

{HomeRouter.isMatch(slug) && <HomePage lang={Lang.fromString(slug)} />}

{CourseRouter.isMatch(slug) && <CoursesPage />}

{BlogsRouter.isMatch(slug) && <BlogsPage />}

{TagRouter.isMatch(slug) && <TagPage />}

{
  !HomeRouter.isMatch(slug) &&
    !CourseRouter.isMatch(slug) &&
    !BlogsRouter.isMatch(slug) &&
    !TagRouter.isMatch(slug) && <DocPage slug={slug} redirectPath="/404" />
}
