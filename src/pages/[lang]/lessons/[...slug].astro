---
import LessonDoc from '@/models/LessonDoc';
import LessonView from '@/views/LessonView.astro';

export const prerender = true;
export async function getStaticPaths() {
  return LessonDoc.getStaticPaths();
}

/**
 * slug: api_market/27-mysql
 * lang: zh-cn
 *
 * bookId: api_market
 * id: api_market/zh-cn/27-mysql
 */

const { slug, lang } = Astro.params;
let bookId = slug.split('/')[0];
let id = '';

if (slug.split('/').length === 1) {
  id = `${bookId}/${lang}`;
} else {
  id = `${bookId}/${lang}/${slug.replace(`${bookId}/`, '')}`;
}
---

<LessonView id={id} />
