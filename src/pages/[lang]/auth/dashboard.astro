---
import { createSessionClient } from '@/server/appwrite';
import AppLayout from '@/layouts/AppLayout.astro';
import AccountInfo from '@/components/AccountInfo.vue';

export const prerender = false;
const { account } = createSessionClient(Astro.request);

console.log('account page');

let user;
try {
  user = await account.get();
} catch (error) {
  console.error('Failed to fetch user:', error);
  user = null;
}
---

<AppLayout title="Account" description="Account">
  <div class="container mx-auto px-4 py-8">
    <AccountInfo client:load user={user} />
  </div>
</AppLayout>
