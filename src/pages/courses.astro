---
import AppLayout from '@layouts/AppLayout.astro';
export const prerender = true;

// 获取浏览器首选语言
const preferredLocale = Astro.preferredLocale;
const currentLocale = Astro.currentLocale;

// 使用 preferredLocale 如果存在，否则使用 currentLocale
const locale = preferredLocale || currentLocale || 'zh-cn';
const redirectPath = `/${locale}/courses`;

console.log('📑 CoursesPage: Start processing');
console.log('📑 CoursesPage: locale', locale);
console.log('📑 CoursesPage: redirect to', redirectPath);

// return Astro.redirect(redirectPath);
---

<AppLayout
  title="课程列表"
  description="课程列表"
  template="splash"
  frontmatter={{
    title: '课程列表',
    description: '课程列表',
    template: 'splash',
  }}
  hasSidebar={false}
  headings={[]}
  sidebar={null}
  hidePageTitle={true}
/>

<script define:vars={{ redirectPath }}>
  window.location.href = redirectPath;
</script>
