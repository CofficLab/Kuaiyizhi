---
import AppLayout from '@layouts/AppLayout.astro';
import MetaDB from '@/database/MetaDB';

export interface Props {
    id: string;
}

const { id } = Astro.props;

const doc = await MetaDB.find(id);

if (!doc) {
    return Astro.redirect(404);
}

const { Content, headings } = await doc.render();

const sidebarItem = await doc.getTopSidebarItem();
---

<AppLayout title={doc.getTitle()} description={doc.getDescription()} sidebar={sidebarItem}>
    <Content />
</AppLayout>
