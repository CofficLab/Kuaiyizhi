---
import AppLayout from '../layouts/AppLayout.astro';
import { getCourses } from '../database/courses';
import CoursesPage from './CoursesPage.astro';

const { lang } = Astro.props;
const courses = await getCourses();
const books = courses.map((course) => ({
  link: `/${lang}/courses/${course.id.replace('zh-cn/', '').replace('en/', '')}`,
  title: course.data.title ?? '',
}));

const title = lang === 'zh-cn' ? '课程列表' : 'Courses List';
const description = lang === 'zh-cn' ? '课程列表' : 'Courses List';
---

<AppLayout title={title} description={description}>
  <CoursesPage books={books} />
</AppLayout>
